<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>IB Year 1 Starter Guide + Subject Tabs</title>
  <style>
    :root{
      --bg:#0b1220;
      --card:#111a2e;
      --text:#e9eefc;
      --muted:#b9c2dd;
      --accent:#7aa2ff;
      --accent2:#7dffb2;
      --border: rgba(255,255,255,0.12);
      --shadow: 0 16px 40px rgba(0,0,0,0.30);
    }
    *{ box-sizing:border-box; }
    body{
      margin:0;
      font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Arial, sans-serif;
      background:
        radial-gradient(900px 500px at 20% 10%, rgba(122,162,255,0.22), transparent),
        radial-gradient(900px 500px at 80% 30%, rgba(125,255,178,0.14), transparent),
        var(--bg);
      color:var(--text);
      line-height:1.55;
    }
    a{ color:inherit; }
    .wrap{ max-width:1150px; margin:0 auto; padding:24px; }

    .nav{
      display:flex; justify-content:space-between; align-items:center; gap:12px;
      padding:14px 16px;
      border:1px solid var(--border);
      background: rgba(17,26,46,0.78);
      backdrop-filter: blur(10px);
      border-radius:16px;
      position: sticky; top:16px; z-index:10;
      box-shadow: var(--shadow);
    }
    .brand{ font-weight:900; letter-spacing:0.2px; display:flex; gap:10px; align-items:center; }
    .pill{
      font-size:12px; padding:4px 10px; border-radius:999px;
      border:1px solid var(--border); color:var(--muted);
    }
    .navlinks{ display:flex; gap:10px; flex-wrap:wrap; }
    .navlinks a{
      color:var(--muted);
      font-size:14px;
      padding:8px 10px;
      border-radius:10px;
      text-decoration:none;
      border:1px solid transparent;
    }
    .navlinks a:hover{
      background: rgba(255,255,255,0.06);
      color:var(--text);
      border-color: rgba(255,255,255,0.06);
    }

    .hero{
      margin-top:18px;
      border:1px solid var(--border);
      background: rgba(17,26,46,0.58);
      border-radius:22px;
      padding:28px;
      box-shadow: var(--shadow);
    }
    h1{ margin:0; font-size:40px; line-height:1.05; }
    .sub{ margin-top:10px; color:var(--muted); max-width:90ch; }

    .grid{ display:grid; grid-template-columns: repeat(12, 1fr); gap:16px; margin-top:16px; }
    .card{
      grid-column: span 6;
      border:1px solid var(--border);
      background: rgba(17,26,46,0.70);
      border-radius:18px;
      padding:18px;
      box-shadow: 0 10px 26px rgba(0,0,0,0.18);
    }
    .card h2{ margin:0 0 8px 0; font-size:18px; }
    .card p{ margin:0; color:var(--muted); }
    .card ul{ margin:10px 0 0; padding-left:18px; color:var(--muted); }
    .card li{ margin:6px 0; }

    .tool{
      grid-column: span 12;
      border:1px solid var(--border);
      background: rgba(17,26,46,0.70);
      border-radius:18px;
      padding:18px;
      box-shadow: 0 10px 26px rgba(0,0,0,0.18);
    }
    .tool h2{ margin:0 0 8px 0; font-size:18px; }
    .tool p{ margin:0 0 12px 0; color:var(--muted); }

    .row{ display:grid; grid-template-columns: repeat(12, 1fr); gap:12px; }
    .field{ grid-column: span 4; }
    label{ display:block; font-size:12px; color:var(--muted); margin-bottom:6px; }
    input, select, textarea{
      width:100%;
      padding:10px 12px;
      border-radius:12px;
      border:1px solid var(--border);
      background: rgba(0,0,0,0.25);
      color:var(--text);
      outline:none;
    }
    textarea{ min-height: 90px; resize: vertical; }

    .btn{
      display:inline-block;
      padding:10px 14px;
      border-radius:12px;
      border:1px solid var(--border);
      background: rgba(255,255,255,0.06);
      color:var(--text);
      font-weight:800;
      cursor:pointer;
      user-select:none;
    }
    .btn:hover{ background: rgba(255,255,255,0.10); }

    .result{
      margin-top:12px;
      border:1px dashed var(--border);
      border-radius:14px;
      padding:14px;
      color:var(--muted);
      background: rgba(0,0,0,0.12);
    }

    .section{
      margin-top:18px;
      padding-top:18px;
      border-top:1px solid rgba(255,255,255,0.10);
    }
    .anchor{ scroll-margin-top: 115px; }

    .tabs{
      display:flex;
      gap:10px;
      flex-wrap:wrap;
      margin-top:10px;
    }
    .tabBtn{
      padding:10px 12px;
      border-radius:12px;
      border:1px solid var(--border);
      background: rgba(255,255,255,0.05);
      color: var(--muted);
      cursor:pointer;
      font-weight:800;
    }
    .tabBtn:hover{ background: rgba(255,255,255,0.09); color: var(--text); }
    .tabBtn.active{
      background: rgba(122,162,255,0.16);
      border-color: rgba(122,162,255,0.35);
      color: var(--text);
    }
    .tabPanel{ display:none; margin-top:14px; }
    .tabPanel.active{ display:block; }

    .quizQ{
      border:1px solid var(--border);
      border-radius:14px;
      padding:14px;
      margin-top:12px;
      background: rgba(0,0,0,0.18);
    }
    .quizQ h3{ margin:0 0 8px 0; font-size:15px; }
    .quizQ .opts{ display:grid; gap:8px; margin-top:10px; }
    .opt{
      border:1px solid var(--border);
      border-radius:12px;
      padding:10px 12px;
      background: rgba(255,255,255,0.04);
      cursor:pointer;
      color:var(--muted);
      user-select:none;
    }
    .opt:hover{ background: rgba(255,255,255,0.08); color:var(--text); }

    .mini{
      display:inline-block;
      font-size:12px;
      padding:4px 10px;
      border-radius:999px;
      border:1px solid var(--border);
      color:var(--muted);
      background: rgba(255,255,255,0.04);
      margin-right:6px;
      margin-top:6px;
    }

    .footer{
      margin:18px 0 6px;
      color:var(--muted);
      font-size:13px;
    }

    @media (max-width: 860px){
      .card{ grid-column: span 12; }
      .field{ grid-column: span 12; }
      h1{ font-size:34px; }
    }
  </style>
</head>
<body>
  <div class="wrap">
    <div class="nav">
      <div class="brand">IB Starter Guide <span class="pill">Year 1</span></div>
      <div class="navlinks">
        <a href="#basics">Basics</a>
        <a href="#papers">Papers</a>
        <a href="#subjects">Subjects</a>
        <a href="#planner">Planner</a>
        <a href="#quiz">Study Quiz</a>
        <a href="#resources">Resources</a>
        <a href="#mistakes">Mistake Tracker</a>
      </div>
    </div>

    <section class="hero">
      <h1>Start IB without crashing out.</h1>
      <p class="sub">
        A Year 1 guide with subject tabs (like mini-pages), paper breakdowns (HL vs SL), and tools:
        planner, study quiz, and a built-in mistake tracker.
      </p>

      <div class="grid">
        <div class="card section anchor" id="basics">
          <h2>IB Basics (quick)</h2>
          <ul>
            <li><b>HL vs SL:</b> HL = deeper content + sometimes extra exam paper(s).</li>
            <li><b>IAs:</b> coursework that counts. Start early, finish early.</li>
            <li><b>TOK:</b> knowledge + argument (essay + exhibition).</li>
            <li><b>EE:</b> extended essay ‚Äî easiest when you pick a realistic topic early.</li>
          </ul>
          <div class="mini">Rule: start earlier</div>
          <div class="mini">Rule: track mistakes</div>
        </div>

        <div class="card section">
          <h2>What actually raises marks</h2>
          <ul>
            <li>Past paper questions + markscheme review</li>
            <li>Active recall (not rereading)</li>
            <li>Fixing repeated mistakes (error log)</li>
            <li>Timed practice once a week</li>
          </ul>
        </div>

        <div class="tool section anchor" id="papers">
          <h2>What are ‚ÄúPapers‚Äù?</h2>
          <p>
            ‚ÄúPapers‚Äù are the exam components. Different papers test different skills. The exact paper structure
            depends on the subject and HL vs SL.
          </p>
          <div class="result">
            Scroll to <b>Subjects</b> to see the paper breakdown for each course (including the examples you mentioned:
            <b>Math SL has 2 papers</b>, while <b>Econ HL has 3</b>).
          </div>
        </div>

        <div class="tool section anchor" id="subjects">
          <h2>Subjects (switch tabs like ‚Äúpages‚Äù)</h2>
          <p>Pick a subject tab. Each one shows paper structure + how to study + common mark traps.</p>

          <div class="tabs" id="tabBar">
            <button class="tabBtn active" data-tab="chem">Chem</button>
            <button class="tabBtn" data-tab="bio">Bio</button>
            <button class="tabBtn" data-tab="phys">Physics</button>
            <button class="tabBtn" data-tab="math">Math AA</button>
            <button class="tabBtn" data-tab="econ">Econ</button>
            <button class="tabBtn" data-tab="psych">Psych</button>
            <button class="tabBtn" data-tab="eng">English Lit</button>
          </div>

          <div class="tabPanel active" id="chem">
            <div class="row">
              <div class="card" style="grid-column: span 6;">
                <h2>Chem ‚Äî Papers</h2>
                <ul>
                  <li><b>Paper 1A:</b> MCQ</li>
                  <li><b>Paper 1B:</b> data-based / skills</li>
                  <li><b>Paper 2:</b> written responses + calculations + explanations</li>
                  <li><b>Paper 3:</b> (depends on syllabus/version)</li>
                </ul>
              </div>
              <div class="card" style="grid-column: span 6;">
                <h2>Chem ‚Äî Tips</h2>
                <ul>
                  <li>Do questions by topic ‚Üí then mixed sets</li>
                  <li>Build an ‚Äúorganic mechanism‚Äù sheet</li>
                  <li>Always show units + sig figs</li>
                  <li>Review markschemes to learn wording</li>
                </ul>
              </div>
            </div>
          </div>

          <div class="tabPanel" id="bio">
            <div class="row">
              <div class="card" style="grid-column: span 6;">
                <h2>Bio ‚Äî Papers</h2>
                <ul>
                  <li><b>Paper 1A:</b> MCQ</li>
                  <li><b>Paper 1B:</b> data-based / experimental skills</li>
                  <li><b>Paper 2:</b> structured + extended responses</li>
                  <li><b>Paper 3:</b> (depends on syllabus/version)</li>
                </ul>
              </div>
              <div class="card" style="grid-column: span 6;">
                <h2>Bio ‚Äî Tips</h2>
                <ul>
                  <li>Active recall daily (flashcards/blurting)</li>
                  <li>Train keyword answers (concise points)</li>
                  <li>Practice graph/data interpretation</li>
                  <li>Use labeled diagrams when relevant</li>
                </ul>
              </div>
            </div>
          </div>

          <div class="tabPanel" id="phys">
            <div class="row">
              <div class="card" style="grid-column: span 6;">
                <h2>Physics ‚Äî Papers</h2>
                <ul>
                  <li><b>Paper 1A:</b> MCQ</li>
                  <li><b>Paper 1B:</b> data-based / skills</li>
                  <li><b>Paper 2:</b> long-form problems + explanations</li>
                </ul>
              </div>
              <div class="card" style="grid-column: span 6;">
                <h2>Physics ‚Äî Tips</h2>
                <ul>
                  <li>Diagram first, then equations</li>
                  <li>Do enough problems to recognize patterns</li>
                  <li>Always sanity-check units/magnitude</li>
                  <li>Keep an error log (sign errors, assumptions)</li>
                </ul>
              </div>
            </div>
          </div>

          <div class="tabPanel" id="math">
            <div class="row">
              <div class="card" style="grid-column: span 6;">
                <h2>Math AA ‚Äî Papers</h2>
                <ul>
                  <li><b>SL:</b> Paper 1 + Paper 2 (2 papers)</li>
                  <li><b>HL:</b> Paper 1 + Paper 2 + Paper 3 (3 papers)</li>
                  <li>Generally: Paper 1 non-calc, Paper 2 calc, Paper 3 HL-only</li>
                </ul>
              </div>
              <div class="card" style="grid-column: span 6;">
                <h2>Math ‚Äî Tips</h2>
                <ul>
                  <li>Topic drills ‚Üí mixed sets ‚Üí timed sets</li>
                  <li>Track mistakes: sign, domain, trig range, algebra</li>
                  <li>Write steps clearly for method marks</li>
                  <li>Weekly timed practice + review</li>
                </ul>
              </div>
            </div>
          </div>

          <div class="tabPanel" id="econ">
            <div class="row">
              <div class="card" style="grid-column: span 6;">
                <h2>Econ ‚Äî Papers</h2>
                <ul>
                  <li><b>SL:</b> Paper 1 + Paper 2</li>
                  <li><b>HL:</b> Paper 1 + Paper 2 + Paper 3 (3 papers)</li>
                  <li>Paper 1: essay response</li>
                  <li>Paper 2: data response + diagrams</li>
                  <li>Paper 3 (HL): quantitative/policy focus</li>
                </ul>
              </div>
              <div class="card" style="grid-column: span 6;">
                <h2>Econ ‚Äî Tips</h2>
                <ul>
                  <li>Master key diagrams + label properly</li>
                  <li>Use DEED (Define, Explain, Example, Diagram)</li>
                  <li>Evaluation = your marks (pros/cons + judgement)</li>
                  <li>Practice picking the right diagram fast</li>
                </ul>
              </div>
            </div>
          </div>

          <div class="tabPanel" id="psych">
            <div class="row">
              <div class="card" style="grid-column: span 6;">
                <h2>Psych ‚Äî Papers</h2>
                <ul>
                  <li><b>SL:</b> Paper 1 + Paper 2</li>
                  <li><b>HL:</b> Paper 1 + Paper 2 + Paper 3</li>
                  <li>Paper 3 (HL): research methods / stimulus/data</li>
                </ul>
              </div>
              <div class="card" style="grid-column: span 6;">
                <h2>Psych ‚Äî Tips</h2>
                <ul>
                  <li>Study bank: Aim, Method, Findings, Eval, Link</li>
                  <li>Always link studies back to the question</li>
                  <li>Learn command terms (describe/explain/evaluate)</li>
                  <li>Paper 3: practice method limitations + data</li>
                </ul>
              </div>
            </div>
          </div>

          <div class="tabPanel" id="eng">
            <div class="row">
              <div class="card" style="grid-column: span 6;">
                <h2>English Lit ‚Äî Papers</h2>
                <ul>
                  <li><b>Paper 1:</b> unseen analysis</li>
                  <li><b>Paper 2:</b> comparative essay on studied works</li>
                </ul>
              </div>
              <div class="card" style="grid-column: span 6;">
                <h2>English ‚Äî Tips</h2>
                <ul>
                  <li>Paper 1: plan quickly ‚Üí write focused paragraphs</li>
                  <li>Paper 2: theme-based comparisons + quote bank</li>
                  <li>Use claim ‚Üí evidence ‚Üí analysis ‚Üí link structure</li>
                  <li>Timed practice improves fastest</li>
                </ul>
              </div>
            </div>
          </div>

          <div class="result">
            Want more subjects? We can add History, Business, Geo, CS, French, etc. same format.
          </div>
        </div>

        <div class="tool section anchor" id="planner">
          <h2>üìÖ Study Planner Generator</h2>
          <p>Enter your exam date and hours/week. It generates a weekly plan + time split.</p>

          <div class="row">
            <div class="field">
              <label for="examDate">Exam date</label>
              <input id="examDate" type="date"/>
            </div>

            <div class="field">
              <label for="hoursPerWeek">Hours per week</label>
              <input id="hoursPerWeek" type="number" min="1" max="60" placeholder="e.g., 8"/>
            </div>

            <div class="field">
              <label for="subjectsCount">How many subjects?</label>
              <select id="subjectsCount">
                <option value="3">3</option>
                <option value="4" selected>4</option>
                <option value="5">5</option>
                <option value="6">6</option>
              </select>
            </div>
          </div>

          <div style="margin-top:12px;">
            <button class="btn" id="makePlanBtn">Generate Plan</button>
          </div>

          <div class="result" id="planResult">Your plan will show here.</div>
        </div>

        <div class="tool section anchor" id="quiz">
          <h2>üß† Study Method Quiz</h2>
          <p>Answer 5 questions. It recommends a main method + how to use it.</p>

          <div class="quizQ">
            <h3>1) Biggest problem when studying?</h3>
            <div class="opts">
              <div class="opt" data-q="1" data-a="recall">I forget it after 1‚Äì2 days.</div>
              <div class="opt" data-q="1" data-a="practice">I can‚Äôt answer exam questions.</div>
              <div class="opt" data-q="1" data-a="focus">I get distracted / inconsistent.</div>
            </div>
          </div>

          <div class="quizQ">
            <h3>2) What stresses you more?</h3>
            <div class="opts">
              <div class="opt" data-q="2" data-a="practice">Problem solving (Math/Physics style).</div>
              <div class="opt" data-q="2" data-a="recall">Lots of content (Bio/Chem style).</div>
              <div class="opt" data-q="2" data-a="writing">Writing (English/History style).</div>
            </div>
          </div>

          <div class="quizQ">
            <h3>3) What do you do right now?</h3>
            <div class="opts">
              <div class="opt" data-q="3" data-a="notes">Re-read notes / highlight.</div>
              <div class="opt" data-q="3" data-a="practice">Some questions sometimes.</div>
              <div class="opt" data-q="3" data-a="recall">Flashcards / blurting / self-testing.</div>
            </div>
          </div>

          <div class="quizQ">
            <h3>4) Goal for this month?</h3>
            <div class="opts">
              <div class="opt" data-q="4" data-a="practice">Increase marks fast.</div>
              <div class="opt" data-q="4" data-a="recall">Actually remember + understand.</div>
              <div class="opt" data-q="4" data-a="focus">Build a consistent routine.</div>
            </div>
          </div>

          <div class="quizQ">
            <h3>5) What‚Äôs most realistic daily?</h3>
            <div class="opts">
              <div class="opt" data-q="5" data-a="recall">10‚Äì20 min flashcards / blurting.</div>
              <div class="opt" data-q="5" data-a="practice">20‚Äì30 min question sets.</div>
              <div class="opt" data-q="5" data-a="focus">25/5 Pomodoro blocks.</div>
            </div>
          </div>

          <div style="margin-top:12px;">
            <button class="btn" id="quizReset">Reset Quiz</button>
          </div>

          <div class="result" id="quizResult">Pick one answer per question.</div>
        </div>

        <div class="tool section anchor" id="resources">
          <h2>üìö Resources Hub (what to collect)</h2>
          <p>Keep a small resource set you actually use. Turn resources into practice.</p>
          <div class="row">
            <div class="card" style="grid-column: span 6;">
              <h2>‚Äú7 Bank‚Äù checklist</h2>
              <ul>
                <li>Past paper questions (timed)</li>
                <li>Markscheme patterns</li>
                <li>Mistake log</li>
                <li>Flashcards / prompts</li>
                <li>Essay plans / templates</li>
              </ul>
            </div>
            <div class="card" style="grid-column: span 6;">
              <h2>How to use resources</h2>
              <ul>
                <li>Don‚Äôt collect 50 links‚Äîcollect 10 that you use.</li>
                <li>Every resource should become recall or practice questions.</li>
                <li>Once/week: timed set + update mistakes.</li>
              </ul>
            </div>
          </div>
        </div>

        <div class="tool section anchor" id="mistakes">
          <h2>üßæ Mistake Tracker</h2>
          <p>Add mistakes as you go. It saves locally and you can download as a text file.</p>

          <div class="row">
            <div class="field">
              <label for="mSubject">Subject</label>
              <select id="mSubject">
                <option>Chem</option>
                <option>Bio</option>
                <option>Physics</option>
                <option>Math AA</option>
                <option>Econ</option>
                <option>Psych</option>
                <option>English Lit</option>
              </select>
            </div>
            <div class="field">
              <label for="mTopic">Topic</label>
              <input id="mTopic" placeholder="e.g., Equilibrium / Kinematics / Paper 1 analysis"/>
            </div>
            <div class="field">
              <label for="mType">Mistake type</label>
              <select id="mType">
                <option>Concept gap</option>
                <option>Algebra/calculation error</option>
                <option>Misread question</option>
                <option>Forgot keyword/definition</option>
                <option>Weak evaluation/explanation</option>
                <option>Time management</option>
              </select>
            </div>
          </div>

          <div class="row" style="margin-top:12px;">
            <div class="field" style="grid-column: span 12;">
              <label for="mDetails">What happened + fix (1‚Äì3 lines)</label>
              <textarea id="mDetails" placeholder="What went wrong? What is the correct approach? What rule will you follow next time?"></textarea>
            </div>
          </div>

          <div style="margin-top:12px; display:flex; gap:10px; flex-wrap:wrap;">
            <button class="btn" id="addMistakeBtn">Add Mistake</button>
            <button class="btn" id="clearMistakesBtn">Clear All</button>
            <button class="btn" id="downloadMistakesBtn">Download .txt</button>
          </div>

          <div class="result" id="mistakeList">No mistakes saved yet.</div>
        </div>
      </div>
    </section>

    <div class="footer">Embed this into Google Sites using Insert ‚Üí Embed ‚Üí URL (your GitHub Pages link).</div>
  </div>

<script>
  // Tabs
  const tabButtons = document.querySelectorAll(".tabBtn");
  const tabPanels = document.querySelectorAll(".tabPanel");
  function activateTab(tabId){
    tabButtons.forEach(b => b.classList.toggle("active", b.dataset.tab === tabId));
    tabPanels.forEach(p => p.classList.toggle("active", p.id === tabId));
  }
  tabButtons.forEach(btn => btn.addEventListener("click", () => activateTab(btn.dataset.tab)));

  // Planner
  function daysBetween(a, b){
    const ms = 24 * 60 * 60 * 1000;
    return Math.ceil((b - a) / ms);
  }
  function safeParseInt(v){
    const n = parseInt(v, 10);
    return Number.isFinite(n) ? n : null;
  }
  const makePlanBtn = document.getElementById("makePlanBtn");
  const planResult = document.getElementById("planResult");
  makePlanBtn.addEventListener("click", () => {
    const examDateVal = document.getElementById("examDate").value;
    const hoursVal = document.getElementById("hoursPerWeek").value;
    const subjectsVal = document.getElementById("subjectsCount").value;

    if(!examDateVal){ planResult.textContent = "Pick an exam date first."; return; }

    const hoursPerWeek = safeParseInt(hoursVal);
    if(hoursPerWeek === null || hoursPerWeek <= 0){
      planResult.textContent = "Enter your hours/week (like 6, 8, 10).";
      return;
    }

    const subjects = safeParseInt(subjectsVal) || 4;
    const today = new Date(); today.setHours(0,0,0,0);
    const examDate = new Date(examDateVal + "T00:00:00");
    const daysLeft = daysBetween(today, examDate);

    if(daysLeft < 1){ planResult.textContent = "Pick a future exam date."; return; }

    const weeksLeft = Math.max(1, Math.ceil(daysLeft / 7));
    const totalHours = hoursPerWeek * weeksLeft;
    const practice = Math.round(totalHours * 0.60);
    const recall = Math.round(totalHours * 0.25);
    const weak = totalHours - practice - recall;
    const perSubject = Math.max(1, Math.floor(hoursPerWeek / subjects));

    planResult.innerHTML = `
      <div><b>Time left:</b> ${daysLeft} days (${weeksLeft} week${weeksLeft>1?"s":""})</div>
      <div><b>Total study hours:</b> ${totalHours}h</div>
      <div style="margin-top:10px;">
        <b>Split:</b><br/>
        ‚Ä¢ Practice questions: ${practice}h<br/>
        ‚Ä¢ Recall/review: ${recall}h<br/>
        ‚Ä¢ Weak topics: ${weak}h
      </div>
      <div style="margin-top:10px;">
        <b>Weekly routine:</b><br/>
        ‚Ä¢ ${subjects} subjects √ó ~${perSubject}h each/week<br/>
        ‚Ä¢ 1 day/week: timed set + error review
      </div>
    `;
  });

  // Quiz
  const picks = {1:null,2:null,3:null,4:null,5:null};
  const scores = { recall:0, practice:0, focus:0, writing:0, notes:0 };
  const quizResult = document.getElementById("quizResult");

  function resetScores(){ for(const k in scores) scores[k]=0; }
  function computeQuiz(){
    resetScores();
    Object.values(picks).forEach(v=>{ if(v) scores[v] = (scores[v] || 0) + 1; });

    const unanswered = Object.values(picks).filter(v=>!v).length;
    if(unanswered){ quizResult.textContent = `Pick one answer per question. (${unanswered} left)`; return; }

    let best="recall", bestVal=-1;
    for(const k in scores){ if(scores[k] > bestVal){ bestVal=scores[k]; best=k; } }

    if(best === "recall"){
      quizResult.innerHTML = `<b>Recommendation: Active Recall + Spaced Repetition</b><br/>10‚Äì20 min/day flashcards/blurting. Re-test misses tomorrow.`;
    } else if(best === "practice"){
      quizResult.innerHTML = `<b>Recommendation: Past Paper Questions</b><br/>Do small sets 3‚Äì5x/week. Write mistakes and redo them 48h later.`;
    } else if(best === "focus"){
      quizResult.innerHTML = `<b>Recommendation: Pomodoro Routine</b><br/>Use 25/5 (or 40/10). Start with 2 blocks/day. Phone away.`;
    } else {
      quizResult.innerHTML = `<b>Recommendation: Structure-first Writing</b><br/>Plan fast, write timed paragraphs, then improve one paragraph.`;
    }
  }

  document.querySelectorAll(".opt").forEach(btn=>{
    btn.addEventListener("click", ()=>{
      const q = btn.getAttribute("data-q");
      const a = btn.getAttribute("data-a");
      picks[q]=a;

      document.querySelectorAll(\`.opt[data-q="\${q}"]\`).forEach(x=>{
        x.style.outline="none"; x.style.color="var(--muted)";
      });
      btn.style.outline="2px solid rgba(122,162,255,0.65)";
      btn.style.color="var(--text)";

      computeQuiz();
    });
  });

  document.getElementById("quizReset").addEventListener("click", ()=>{
    for(const k in picks) picks[k]=null;
    document.querySelectorAll(".opt").forEach(x=>{
      x.style.outline="none"; x.style.color="var(--muted)";
    });
    quizResult.textContent="Pick one answer per question.";
  });

  // Mistake Tracker (local)
  const STORAGE_KEY="ib_mistakes_v1";
  const listEl=document.getElementById("mistakeList");

  function loadMistakes(){
    try{ return JSON.parse(localStorage.getItem(STORAGE_KEY) || "[]"); }
    catch(e){ return []; }
  }
  function saveMistakes(items){ localStorage.setItem(STORAGE_KEY, JSON.stringify(items)); }
  function renderMistakes(){
    const items = loadMistakes();
    if(!items.length){ listEl.textContent="No mistakes saved yet."; return; }
    listEl.innerHTML = items.map((m,i)=>`
      <div style="padding:10px 0; border-bottom:1px solid rgba(255,255,255,0.08);">
        <div><b>#${i+1}</b> ‚Äî <b>${m.subject}</b> ¬∑ <span style="color:var(--muted)">${m.type}</span></div>
        <div style="color:var(--muted)"><b>Topic:</b> ${m.topic || "-"}</div>
        <div style="color:var(--muted)">${m.details || "-"}</div>
      </div>
    `).join("");
  }

  document.getElementById("addMistakeBtn").addEventListener("click", ()=>{
    const subject=document.getElementById("mSubject").value;
    const topic=document.getElementById("mTopic").value.trim();
    const type=document.getElementById("mType").value;
    const details=document.getElementById("mDetails").value.trim();
    if(!details){ alert("Add a short description + fix."); return; }

    const items=loadMistakes();
    items.unshift({subject, topic, type, details, ts:new Date().toISOString()});
    saveMistakes(items);

    document.getElementById("mTopic").value="";
    document.getElementById("mDetails").value="";
    renderMistakes();
  });

  document.getElementById("clearMistakesBtn").addEventListener("click", ()=>{
    if(confirm("Clear all saved mistakes?")){ saveMistakes([]); renderMistakes(); }
  });

  document.getElementById("downloadMistakesBtn").addEventListener("click", ()=>{
    const items=loadMistakes();
    if(!items.length){ alert("No mistakes to download yet."); return; }
    const lines=["IB Mistake Tracker Export","========================"];
    items.slice().reverse().forEach((m,i)=>{
      lines.push(`\n#${i+1}`);
      lines.push(`Subject: ${m.subject}`);
      lines.push(`Type: ${m.type}`);
      lines.push(`Topic: ${m.topic || "-"}`);
      lines.push(`Details/Fix: ${m.details || "-"}`);
      lines.push(`Date: ${m.ts}`);
    });
    const blob=new Blob([lines.join("\n")], {type:"text/plain"});
    const url=URL.createObjectURL(blob);
    const a=document.createElement("a");
    a.href=url; a.download="ib-mistakes.txt"; a.click();
    URL.revokeObjectURL(url);
  });

  renderMistakes();
</script>
</body>
</html>
